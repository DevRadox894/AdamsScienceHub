@model IEnumerable<AdamsScienceHub.Models.Question>
@{
    ViewBag.Title = "Questions";
    var subject = ViewBag.Subject as AdamsScienceHub.Models.Subject;
}

<div class="admin-container">
    <div class="admin-greeting mb-4">
        <h2>@subject?.SubjectName — Questions Management</h2>
        <a asp-controller="AdminQuestions"
           asp-action="ManageQuestions"
           class="btn btn-secondary mb-3">← Back to Subjects</a>
        <p>Manage all questions for this subject.</p>
    </div>

    <div class="mb-4 d-flex justify-content-between align-items-center">
        <div class="dashboard-card" style="max-width: 220px; padding: 12px 20px;">
            Total Questions: @Model.Count()
        </div>
        <a asp-controller="AdminQuestions"
           asp-action="AddQuestion"
           asp-route-subjectId="@subject?.SubjectId"
           class="btn btn-add">
            + Add New Question
        </a>
    </div>

    @if (Model.Any())
    {
        <div class="table-responsive">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Question Text</th>
                        <th>Correct Answer</th>
                        <th>Options</th>
                        <th style="width: 160px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var q in Model)
                    {
                        <tr>
                            <td>@q.QuestionId</td>
                            <td>@Html.Raw(q.QuestionText.Replace("[", "<span class='blank-space'>[").Replace("]", "]</span>"))</td>
                            <td style="color: #00f0ff; font-weight: bold;">@q.CorrectAnswer</td>
                            <td style="color: #b0c4de;">
                                <strong>A)</strong> @q.OptionA<br>
                                <strong>B)</strong> @q.OptionB<br>
                                <strong>C)</strong> @q.OptionC<br>
                                <strong>D)</strong> @q.OptionD
                            </td>
                            <td>
                                <div class="d-flex gap-1">
                                    <a asp-controller="AdminQuestions"
                                       asp-action="EditQuestion"
                                       asp-route-id="@q.QuestionId"
                                       class="btn btn-edit">
                                        Edit
                                    </a>
                                    <a asp-controller="AdminQuestions"
                                       asp-action="DeleteQuestion"
                                       asp-route-id="@q.QuestionId"
                                       class="btn btn-delete"
                                       onclick="return confirm('Are you sure you want to delete this question?')">
                                        Delete
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="text-center py-4">
            <p style="color: #b0c4de; font-size: 16px;">No questions yet!</p>
            <p style="color: #b0c4de;">This subject doesn't have any questions. Click "Add New Question" to create the first one.</p>
        </div>
    }
</div>